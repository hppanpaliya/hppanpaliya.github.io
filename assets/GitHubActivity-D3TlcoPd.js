import{r as e,j as t,m as a,A as s}from"./framer-CWXrgV8Z.js";import{G as l,m as i,b as o,n as r}from"./icons-DCZhjF_Q.js";import"./react-vendor-B_uAldPx.js";const n=()=>{const[n,c]=e.useState([]),[d,p]=e.useState(!0),[m,x]=e.useState(null),[h,f]=e.useState(!1);e.useEffect(()=>{(async()=>{try{const e=await fetch("https://api.github.com/users/hppanpaliya/events");if(!e.ok)throw new Error("Failed to fetch GitHub data");const t=(await e.json()).filter(e=>"PushEvent"===e.type).slice(0,3),a=await Promise.all(t.map(async e=>{let t="Update repository";if(e.payload.commits&&e.payload.commits.length>0)t=e.payload.commits[0].message;else if(e.payload.head)try{const a=await fetch(e.repo.url+"/commits/"+e.payload.head);if(a.ok){t=(await a.json()).commit.message}}catch(a){}return{id:e.id,repo:e.repo.name.split("/")[1]||e.repo.name,fullRepo:e.repo.name,message:t,date:new Date(e.created_at),url:`https://github.com/${e.repo.name}`}}));c(a)}catch(e){x(e.message)}finally{p(!1)}})()},[]);const u=e=>{const t=Math.floor((new Date-e)/1e3);let a=t/31536e3;return a>1?Math.floor(a)+"y ago":(a=t/2592e3,a>1?Math.floor(a)+"mo ago":(a=t/86400,a>1?Math.floor(a)+"d ago":(a=t/3600,a>1?Math.floor(a)+"h ago":(a=t/60,a>1?Math.floor(a)+"m ago":Math.floor(t)+"s ago"))))};return d?t.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-800/50 border border-slate-700 rounded-xl text-sm text-slate-400 animate-pulse",children:[t.jsx(l,{className:"w-5 h-5"}),t.jsx("span",{children:"Loading activity..."})]}):m||0===n.length?t.jsxs("a",{href:"https://github.com/hppanpaliya",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-800/50 hover:bg-slate-800 border border-slate-700 rounded-xl text-sm text-slate-300 hover:text-cyan-400 transition-all duration-300",children:[t.jsx(l,{className:"w-5 h-5"}),t.jsx("span",{children:"View GitHub Profile"})]}):t.jsx("div",{className:"relative z-50 flex flex-col items-center w-full max-w-md mx-4 sm:mx-auto",children:t.jsxs(a.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{type:"spring",stiffness:400,damping:30},className:`\n          relative bg-slate-900/80 backdrop-blur-md border border-slate-700 \n          overflow-hidden w-full\n          ${h?"rounded-2xl p-4 shadow-2xl":"rounded-full px-4 py-2 hover:bg-slate-800/80 cursor-pointer"}\n        `,onClick:()=>!h&&f(!0),children:[t.jsxs(a.div,{layout:"position",className:"flex items-center justify-between gap-2 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[t.jsxs(a.div,{layout:"position",className:"relative",children:[t.jsx(l,{className:"w-5 h-5 text-slate-300"}),t.jsx("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),t.jsx(s,{mode:"wait",children:h?t.jsx(a.span,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2},className:"font-semibold text-slate-200",children:"Recent Activity"},"expanded"):t.jsxs(a.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2},className:"flex flex-col text-sm min-w-0 flex-1",children:[t.jsxs("div",{className:"flex items-center justify-between gap-2",children:[t.jsx("span",{className:"font-semibold text-cyan-400",children:n[0].repo}),t.jsx("span",{className:"text-slate-500 text-xs whitespace-nowrap",children:u(n[0].date)})]}),t.jsx("span",{className:"truncate text-slate-300",children:n[0].message})]},"collapsed")})]}),t.jsx(a.button,{layout:"position",onClick:e=>{h&&(e.stopPropagation(),f(!1))},className:"p-1 hover:bg-slate-700 rounded-full transition-colors",children:h?t.jsx(i,{className:"w-4 h-4 text-slate-400"}):t.jsx(o,{className:"w-4 h-4 text-slate-500"})})]}),t.jsx(s,{children:h&&t.jsxs(a.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:0},className:"mt-4 space-y-3 overflow-hidden",children:[n.map((e,a)=>t.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"block p-3 rounded-lg bg-slate-800/50 hover:bg-slate-800 border border-slate-700/50 hover:border-cyan-500/30 transition-all group",children:[t.jsxs("div",{className:"flex justify-between items-start mb-1",children:[t.jsx("span",{className:"text-xs font-bold text-cyan-400 group-hover:text-cyan-300",children:e.repo}),t.jsxs("span",{className:"text-[10px] text-slate-500 flex items-center gap-1",children:[t.jsx(r,{className:"w-3 h-3"}),u(e.date)]})]}),t.jsx("p",{className:"text-sm text-slate-300 line-clamp-2 group-hover:text-white transition-colors",children:e.message})]},e.id)),t.jsx("div",{className:"pt-2 text-center border-t border-slate-800",children:t.jsx("a",{href:"https://github.com/hppanpaliya",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-slate-500 hover:text-cyan-400 transition-colors",children:"View all activity on GitHub â†’"})})]})})]})})};export{n as default};
