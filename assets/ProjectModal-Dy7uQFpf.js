import{c as p,b as o,j as e,A as b,m as c,u as v,e as g,X as w,F as j,G as N}from"./index-BBAdwiuq.js";const k=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],S=p("external-link",k);const M=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],y=p("layers",M),C=({chart:t})=>{const a=o.useRef(null),[m,r]=o.useState("");return o.useEffect(()=>{let l=!1;async function d(s){return typeof window>"u"?null:window.mermaid?window.mermaid:new Promise((i,n)=>{const x=document.querySelector(`script[data-src="${s}"]`);if(x){x.addEventListener("load",()=>i(window.mermaid)),x.addEventListener("error",n);return}const u=document.createElement("script");u.setAttribute("data-src",s),u.src=s,u.onload=()=>i(window.mermaid),u.onerror=n,document.head.appendChild(u)})}return(async()=>{if(!(!t||l)){if(typeof t=="string"&&/\.svg(\?|$)/.test(t)){r(`<img src="${t}" alt="diagram" class="w-full"/>`);return}try{let s;if(await d("https://cdn.jsdelivr.net/npm/cytoscape/dist/cytoscape.min.js").catch(x=>{console.warn("Could not load cytoscape from CDN",x)}),s=await d("https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js"),!s)throw new Error("Failed to load mermaid");if(s.initialize({startOnLoad:!1,theme:"dark",securityLevel:"loose",fontFamily:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace"}),a.current&&t)try{const{svg:i}=await s.render(`mermaid-${Math.random().toString(36).slice(2,8)}`,t);l||r(i)}catch(i){console.error("Mermaid render error:",i),l||r('<div class="text-red-400 p-4 border border-red-500 rounded">Failed to render diagram</div>')}}catch(s){console.error("Mermaid load/render failed:",s),l||r('<div class="text-red-400 p-4 border border-red-500 rounded">Failed to render diagram</div>')}}})(),()=>{l=!0}},[t]),e.jsx("div",{ref:a,className:"mermaid-container w-full overflow-x-auto bg-slate-950 p-4 rounded-lg border border-slate-800 flex justify-center",dangerouslySetInnerHTML:{__html:m}})},h=({title:t,children:a})=>e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl sm:text-3xl font-bold text-white mb-4 relative pl-4",children:[e.jsx("span",{className:"absolute left-0 top-1 w-1 h-8 bg-linear-to-b from-cyan-400 to-blue-500 rounded-full"}),t]}),e.jsx("div",{className:"text-gray-300 text-lg space-y-4",children:a})]}),E=({project:t,modalRef:a,onExitClick:m})=>{const{scrollYProgress:r}=v({container:a}),l=g(r,{stiffness:100,damping:30,restDelta:.001}),[d,f]=o.useState("overview"),s=o.useRef(null),i=o.useRef(null);return o.useEffect(()=>(i.current=document.activeElement,setTimeout(()=>s.current?.focus(),0),()=>{try{i.current?.focus?.()}catch{}}),[]),e.jsxs(c.div,{ref:a,initial:{scale:.8,y:50},animate:{scale:1,y:0},exit:{scale:.8,y:50},transition:{type:"spring",stiffness:300,damping:30},className:"bg-slate-900 rounded-2xl max-w-5xl w-full max-h-[90vh] overflow-y-auto border border-slate-700 no-scrollbar",onClick:n=>n.stopPropagation(),children:[e.jsxs("div",{className:"sticky top-0 z-10 bg-slate-900/95 backdrop-blur-md border-b border-slate-800",children:[e.jsxs("div",{className:"p-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{id:"project-modal-title",className:"text-2xl md:text-3xl font-bold text-white",children:t.title}),t.date&&e.jsx("p",{className:"text-cyan-400 text-sm md:text-lg font-medium mt-1",children:t.date})]}),e.jsx("button",{ref:s,onClick:m,className:"text-gray-400 hover:text-cyan-400 transition-colors","aria-label":"Close Modal",children:e.jsx(w,{size:28})})]}),e.jsxs("div",{className:"flex px-6 gap-6",children:[e.jsxs("button",{onClick:()=>f("overview"),className:`pb-3 text-sm font-medium transition-colors relative ${d==="overview"?"text-cyan-400":"text-slate-400 hover:text-white"}`,children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(j,{size:16})," Overview"]}),d==="overview"&&e.jsx(c.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-cyan-400"})]}),e.jsxs("button",{onClick:()=>f("tech"),className:`pb-3 text-sm font-medium transition-colors relative ${d==="tech"?"text-cyan-400":"text-slate-400 hover:text-white"}`,children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(y,{size:16})," Technical Details"]}),d==="tech"&&e.jsx(c.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-cyan-400"})]})]}),e.jsx(c.div,{className:"h-0.5 bg-cyan-400 origin-left absolute bottom-0 left-0 right-0 opacity-0",style:{scaleX:l}})]}),e.jsx("div",{className:"p-8",children:e.jsx(b,{mode:"wait",children:d==="overview"?e.jsxs(c.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:[e.jsx("img",{src:t.image,alt:t.title,className:"w-full h-64 md:h-96 object-cover rounded-xl mb-8 border border-slate-700 shadow-2xl"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 lg:gap-12",children:[e.jsx("div",{className:"md:col-span-2 space-y-12",children:t.caseStudy?e.jsxs(e.Fragment,{children:[e.jsx(h,{title:"The Problem",children:e.jsx("p",{children:t.caseStudy.problem})}),e.jsx(h,{title:"My Role",children:e.jsx("p",{children:t.caseStudy.role})}),e.jsx(h,{title:"Challenges & Solutions",children:e.jsx("p",{children:t.caseStudy.challenges})})]}):e.jsx(h,{title:"Overview",children:e.jsx("p",{children:t.description})})}),e.jsx("aside",{className:"md:col-span-1 space-y-6",children:e.jsxs("div",{className:"bg-slate-800/50 p-6 rounded-xl border border-slate-700",children:[e.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"Links"}),e.jsxs("div",{className:"flex flex-col space-y-3",children:[t.github&&e.jsxs("a",{href:t.github,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center space-x-2 bg-slate-700 hover:bg-slate-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors",children:[e.jsx(N,{size:20}),e.jsx("span",{children:"View on GitHub"})]}),t.demo&&e.jsxs("a",{href:t.demo,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center space-x-2 bg-linear-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 text-white font-semibold py-2 px-4 rounded-lg transition-all",children:[e.jsx(S,{size:20}),e.jsx("span",{children:"Live Demo"})]})]})]})})]})]},"overview"):e.jsxs(c.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"space-y-8",children:[e.jsxs("div",{className:"bg-slate-800/30 p-6 rounded-xl border border-slate-700",children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(y,{className:"text-cyan-400"})," Tech Stack"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.skills.map(n=>e.jsx("span",{className:"bg-slate-700/50 border border-slate-600 text-cyan-100 text-sm font-medium px-3 py-1.5 rounded-md",children:n},n))})]}),t.caseStudy&&t.caseStudy.process&&e.jsx(h,{title:"Architecture & Process",children:e.jsx("p",{className:"whitespace-pre-line",children:t.caseStudy.process})}),t.diagram&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(y,{className:"text-cyan-400"})," System Architecture"]}),e.jsx(C,{chart:t.diagramSvg||t.diagram})]})]},"tech")})})]})},z=({project:t,setSelectedProject:a})=>{o.useEffect(()=>{const r=l=>{l.key==="Escape"&&a(null)};return window.addEventListener("keydown",r),()=>{window.removeEventListener("keydown",r)}},[a]);const m=o.useRef(null);return e.jsx(b,{children:t&&e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80  z-100 flex items-center justify-center p-4",role:"dialog","aria-modal":"true","aria-labelledby":"project-modal-title",onClick:()=>a(null),children:e.jsx(E,{project:t,modalRef:m,onExitClick:()=>a(null)})})})};export{z as default};
