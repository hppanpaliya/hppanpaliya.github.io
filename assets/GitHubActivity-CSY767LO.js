import{r as n,j as e}from"./vendor-react-CNgR7pXY.js";import{G as d,m as N,k as v,n as E}from"./vendor-lucide-CkZRSVxu.js";import{m as i,A as h}from"./vendor-framer-CTSPgvZp.js";import"./vendor-analytics-DXWcCtOD.js";import"./vendor-other-bCU9giRY.js";const D=()=>{const[l,u]=n.useState([]),[f,y]=n.useState(!0),[g,b]=n.useState(null),[o,m]=n.useState(!1);n.useEffect(()=>{(async()=>{try{const s=await fetch("https://api.github.com/users/hppanpaliya/events");if(!s.ok)throw new Error("Failed to fetch GitHub data");const j=(await s.json()).filter(a=>a.type==="PushEvent").slice(0,3),w=await Promise.all(j.map(async a=>{let p="Update repository";if(a.payload.commits&&a.payload.commits.length>0)p=a.payload.commits[0].message;else if(a.payload.head)try{const c=await fetch(a.repo.url+"/commits/"+a.payload.head);c.ok&&(p=(await c.json()).commit.message)}catch(c){console.warn("Could not fetch commit details",c)}return{id:a.id,repo:a.repo.name.split("/")[1]||a.repo.name,fullRepo:a.repo.name,message:p,date:new Date(a.created_at),url:`https://github.com/${a.repo.name}`}}));u(w)}catch(s){console.error("GitHub Activity Error:",s),b(s.message)}finally{y(!1)}})()},[]);const x=r=>{const s=Math.floor((new Date-r)/1e3);let t=s/31536e3;return t>1?Math.floor(t)+"y ago":(t=s/2592e3,t>1?Math.floor(t)+"mo ago":(t=s/86400,t>1?Math.floor(t)+"d ago":(t=s/3600,t>1?Math.floor(t)+"h ago":(t=s/60,t>1?Math.floor(t)+"m ago":Math.floor(s)+"s ago"))))};return f?e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-800/50 border border-slate-700 rounded-xl text-sm text-slate-400 animate-pulse",children:[e.jsx(d,{className:"w-5 h-5"}),e.jsx("span",{children:"Loading activity..."})]}):g||l.length===0?e.jsxs("a",{href:"https://github.com/hppanpaliya",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-800/50 hover:bg-slate-800 border border-slate-700 rounded-xl text-sm text-slate-300 hover:text-cyan-400 transition-all duration-300",children:[e.jsx(d,{className:"w-5 h-5"}),e.jsx("span",{children:"View GitHub Profile"})]}):e.jsx("div",{className:"relative z-50 flex flex-col items-center",children:e.jsxs(i.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{type:"spring",stiffness:400,damping:30},className:`
          relative bg-slate-900/80 backdrop-blur-md border border-slate-700 
          overflow-hidden
          ${o?"rounded-2xl p-4 w-full max-w-md shadow-2xl":"rounded-full px-4 py-2 hover:bg-slate-800/80 cursor-pointer"}
        `,onClick:()=>!o&&m(!0),children:[e.jsxs(i.div,{layout:"position",className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(i.div,{layout:"position",className:"relative",children:[e.jsx(d,{className:"w-5 h-5 text-slate-300"}),e.jsx("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),e.jsx(h,{mode:"wait",children:o?e.jsx(i.span,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2},className:"font-semibold text-slate-200",children:"Recent Activity"},"expanded"):e.jsxs(i.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2},className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"font-semibold text-cyan-400",children:l[0].repo}),e.jsx("span",{className:"text-slate-500",children:"•"}),e.jsx("span",{className:"truncate max-w-[150px] sm:max-w-[200px] text-slate-300",children:l[0].message}),e.jsx("span",{className:"text-slate-500 text-xs whitespace-nowrap",children:x(l[0].date)})]},"collapsed")})]}),e.jsx(i.button,{layout:"position",onClick:r=>{o&&(r.stopPropagation(),m(!1))},className:"p-1 hover:bg-slate-700 rounded-full transition-colors",children:o?e.jsx(N,{className:"w-4 h-4 text-slate-400"}):e.jsx(v,{className:"w-4 h-4 text-slate-500"})})]}),e.jsx(h,{children:o&&e.jsxs(i.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:0},className:"mt-4 space-y-3 overflow-hidden",children:[l.map((r,s)=>e.jsxs("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"block p-3 rounded-lg bg-slate-800/50 hover:bg-slate-800 border border-slate-700/50 hover:border-cyan-500/30 transition-all group",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("span",{className:"text-xs font-bold text-cyan-400 group-hover:text-cyan-300",children:r.repo}),e.jsxs("span",{className:"text-[10px] text-slate-500 flex items-center gap-1",children:[e.jsx(E,{className:"w-3 h-3"}),x(r.date)]})]}),e.jsx("p",{className:"text-sm text-slate-300 line-clamp-2 group-hover:text-white transition-colors",children:r.message})]},r.id)),e.jsx("div",{className:"pt-2 text-center border-t border-slate-800",children:e.jsx("a",{href:"https://github.com/hppanpaliya",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-slate-500 hover:text-cyan-400 transition-colors",children:"View all activity on GitHub →"})})]})})]})})};export{D as default};
