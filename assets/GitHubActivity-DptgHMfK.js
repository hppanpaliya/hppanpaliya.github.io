import{r as e,j as a,m as t,A as s}from"./framer-CWXrgV8Z.js";import{G as i,C as l,a as r,b as o}from"./icons-ypN-ENVs.js";import"./react-vendor-B_uAldPx.js";const n=()=>{const[n,c]=e.useState([]),[d,p]=e.useState(!0),[m,x]=e.useState(null),[h,u]=e.useState(!1);e.useEffect(()=>{(async()=>{try{const e=await fetch("https://api.github.com/users/hppanpaliya/events");if(!e.ok)throw new Error("Failed to fetch GitHub data");const a=(await e.json()).filter(e=>"PushEvent"===e.type).slice(0,3),t=await Promise.all(a.map(async e=>{let a="Update repository";if(e.payload.commits&&e.payload.commits.length>0)a=e.payload.commits[0].message;else if(e.payload.head)try{const t=await fetch(e.repo.url+"/commits/"+e.payload.head);if(t.ok){a=(await t.json()).commit.message}}catch(t){}return{id:e.id,repo:e.repo.name.split("/")[1]||e.repo.name,fullRepo:e.repo.name,message:a,date:new Date(e.created_at),url:`https://github.com/${e.repo.name}`}}));c(t)}catch(e){x(e.message)}finally{p(!1)}})()},[]);const f=e=>{const a=Math.floor((new Date-e)/1e3);let t=a/31536e3;return t>1?Math.floor(t)+"y ago":(t=a/2592e3,t>1?Math.floor(t)+"mo ago":(t=a/86400,t>1?Math.floor(t)+"d ago":(t=a/3600,t>1?Math.floor(t)+"h ago":(t=a/60,t>1?Math.floor(t)+"m ago":Math.floor(a)+"s ago"))))};return d?a.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-800/50 border border-slate-700 rounded-xl text-sm text-slate-400 animate-pulse",role:"status","aria-label":"Loading GitHub activity",children:[a.jsx(i,{className:"w-5 h-5","aria-hidden":"true"}),a.jsx("span",{children:"Loading activity..."})]}):m||0===n.length?a.jsxs("a",{href:"https://github.com/hppanpaliya",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-800/50 hover:bg-slate-800 border border-slate-700 rounded-xl text-sm text-slate-300 hover:text-cyan-400 transition-all duration-300","aria-label":"View my GitHub profile (opens in new tab)",children:[a.jsx(i,{className:"w-5 h-5","aria-hidden":"true"}),a.jsx("span",{children:"View GitHub Profile"})]}):a.jsx("div",{className:"relative z-50 flex flex-col items-center w-full max-w-md mx-4 sm:mx-auto",children:a.jsxs(t.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{type:"spring",stiffness:400,damping:30},className:`\n          relative bg-slate-900/80 backdrop-blur-md border border-slate-700 \n          overflow-hidden w-full\n          ${h?"rounded-2xl p-4 shadow-2xl":"rounded-full px-4 py-2 hover:bg-slate-800/80 cursor-pointer"}\n        `,onClick:()=>!h&&u(!0),children:[a.jsxs(t.div,{layout:"position",className:"flex items-center justify-between gap-2 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[a.jsxs(t.div,{layout:"position",className:"relative","aria-hidden":"true",children:[a.jsx(i,{className:"w-5 h-5 text-slate-300"}),a.jsx("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),a.jsx(s,{mode:"wait",children:h?a.jsx(t.span,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2},className:"font-semibold text-slate-200",children:"Recent Activity"},"expanded"):a.jsxs(t.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2},className:"flex flex-col text-sm min-w-0 flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("span",{className:"font-semibold text-cyan-400",children:n[0].repo}),a.jsx("span",{className:"text-slate-500 text-xs whitespace-nowrap",children:f(n[0].date)})]}),a.jsx("span",{className:"truncate text-slate-300",children:n[0].message})]},"collapsed")})]}),a.jsx(t.button,{layout:"position",onClick:e=>{h&&(e.stopPropagation(),u(!1))},className:"p-1 hover:bg-slate-700 rounded-full transition-colors","aria-label":h?"Collapse GitHub activity":"Expand GitHub activity","aria-expanded":h,children:h?a.jsx(l,{className:"w-4 h-4 text-slate-400","aria-hidden":"true"}):a.jsx(r,{className:"w-4 h-4 text-slate-500","aria-hidden":"true"})})]}),a.jsx(s,{children:h&&a.jsxs(t.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"mt-4 space-y-3 overflow-hidden",children:[n.map((e,t)=>a.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"block p-3 rounded-lg bg-slate-800/50 hover:bg-slate-800 border border-slate-700/50 hover:border-cyan-500/30 transition-all group",children:[a.jsxs("div",{className:"flex justify-between items-start mb-1",children:[a.jsx("span",{className:"text-xs font-bold text-cyan-400 group-hover:text-cyan-300",children:e.repo}),a.jsxs("span",{className:"text-[10px] text-slate-500 flex items-center gap-1",children:[a.jsx(o,{className:"w-3 h-3","aria-hidden":"true"}),f(e.date)]})]}),a.jsx("p",{className:"text-sm text-slate-300 line-clamp-2 group-hover:text-white transition-colors",children:e.message})]},e.id)),a.jsx("div",{className:"pt-2 text-center border-t border-slate-800",children:a.jsx("a",{href:"https://github.com/hppanpaliya",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-slate-500 hover:text-cyan-400 transition-colors",children:"View all activity on GitHub â†’"})})]})})]})})};export{n as default};
